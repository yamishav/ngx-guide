{"version":3,"file":"ng-guide-walk.umd.js","sources":["ng://ng-guide-walk/lib/ng-guide-walk-lib.service.ts","ng://ng-guide-walk/lib/ng-guide-walk-lib.component.ts","ng://ng-guide-walk/lib/utils/index.ts","ng://ng-guide-walk/lib/guide-content/guide-content.component.ts","ng://ng-guide-walk/lib/ng-guide-step.directive.ts","ng://ng-guide-walk/lib/ng-guide-walk-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { WalkEvent } from './ng-guide.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgGuideWalkLibService {\n  private activeSteps = [];\n  private eventWalkSubject: Subject<WalkEvent> = new Subject();\n  private currentStep: number | null = null;\n  private _config = {};\n\n  get config() {\n    return this._config;\n  }\n  set config(config) {\n    this._config = config;\n  }\n\n  constructor() { }\n  register(step: number) {\n    this.activeSteps.push(step);\n  }\n  unregister(step: number) {\n    this.activeSteps =  this.activeSteps.filter(stepNumber => stepNumber !== step);\n  }\n  isLast(step) {\n\n    return this.currentStep ? (this.activeSteps.length) === step : true;\n  }\n  stopGuide() {\n    this.closeCurrentStep();\n    this.currentStep = undefined;\n  }\n  public startGuide() {\n    this.activeSteps.sort();\n    if (this.currentStep) { return; }\n    this.currentStep = 1;\n    this.invokeStep(this.currentStep);\n  }\n  public invokeStep(stepNum: number) {\n    this.closeCurrentStep();\n    this.currentStep = this.activeSteps[stepNum - 1];\n    this.eventWalkSubject.next({ step: stepNum, event: 'open' });\n  }\n  private closeCurrentStep() {\n    if (this.currentStep) {\n      this.eventWalkSubject.next({ step: this.currentStep, event: 'close' });\n    }\n  }\n\n  public nextGuide() {\n    this.closeCurrentStep();\n    if (this.isLast(this.currentStep)) {\n      this.currentStep = undefined;\n      return; // and we are done for this tour\n    }\n    this.currentStep++;\n    this.invokeStep(this.currentStep);\n    \n    \n  }\n  public getStepObservable(stepNum: number): Observable<WalkEvent> {\n    return this.eventWalkSubject\n      .asObservable()\n      .pipe(filter(item => item.step === stepNum));\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'ng-guide-walk',\n  template: `\n    <p>\n      ng-guide-walk-lib works!\n    </p>\n    <ng-content></ng-content>\n  `,\n  styles: []\n})\nexport class NgGuideWalkLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { OnDestroy } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\n/**\n * \n * @param num - the number to parse\n * Try's to parse any to number\n */\nexport function toNumber(num: number | any): number {\n    return Number.isInteger(num) ? num : Number.parseInt(num);\n}\n\nexport function unsignedOnDestroyed(component: OnDestroy) {\n  const oldNgOnDestroy = component.ngOnDestroy;\n  const onDestroySubject$ = new ReplaySubject<void>(1);\n  component.ngOnDestroy = () => {\n    oldNgOnDestroy.apply(component);\n    onDestroySubject$.next(undefined);\n    onDestroySubject$.complete();\n  };\n  return onDestroySubject$;\n}\n\nexport function toBoolean(value: boolean | string) {\n  return String(value) == 'true';\n}\n","import { Component, OnInit, Input, OnDestroy, ElementRef, Renderer2, ViewEncapsulation } from '@angular/core';\nimport * as GuideUtils from '../utils';\nimport { NgGuideWalkLibService } from '../ng-guide-walk-lib.service';\nimport { TouchSequence } from 'selenium-webdriver';\nimport 'popper.js';\nimport Popper from 'popper.js';\nexport type WalkLocation = Popper.Placement;\n\n@Component({\n  encapsulation: ViewEncapsulation.None,\n  selector: 'ng-guide-content',\n  templateUrl: './guide-content.component.html',\n  styleUrls: ['./guide-content.component.scss']\n})\nexport class GuideContentComponent implements OnInit, OnDestroy {\n  private currentAction: 'next' | 'stop' = 'next';\n  private _step = 1;\n  private popper: Popper;\n  show = true;\n  overlayObject = null;\n  @Input() shouldCreateOverlay = false;\n  @Input() modifiers: Popper.Modifiers;\n  @Input() positionFixed = false;\n  @Input() eventsEnabled = true;\n  @Input() target: string | Element;\n  @Input() location: WalkLocation = 'right';\n  @Input() displayArrow: boolean = true;\n  @Input() customCss: { [key: string]: string } = null;\n  @Input() set step(step: number) {\n    this._step = GuideUtils.toNumber(step);\n  }\n  get step() {\n    return this._step;\n  }\n\n\n  constructor(\n    private _element: ElementRef<HTMLElement>,\n    private _renderer: Renderer2,\n    private host: ElementRef<HTMLElement>,\n    private guideService: NgGuideWalkLibService) {\n\n  }\n\n  ngOnInit() {\n    // todo : move to an action trigger when needed\n\n    const { location, positionFixed, eventsEnabled, modifiers } = this;\n  \n    this.popper = new Popper(\n      this.getNode(),\n      this._element.nativeElement.querySelector('.ngx-guide'),\n      <any>{\n        placement: location,\n        positionFixed,\n        eventsEnabled,\n        modifiers\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    this.popper.destroy();\n    this.clean();\n  }\n  next() {\n    this.guideService.nextGuide();\n\n\n  }\n  isLast() {\n    return this.guideService.isLast(this.step);\n  }\n  done() {\n    this.guideService.stopGuide();\n  }\n  private getNode(): Element {\n    if (this.target) {\n      if (typeof this.target === 'string') {\n        return document.querySelector(this.target);\n      } else {\n        return this.target;\n      }\n    } else {\n      return this._element.nativeElement;\n    }\n  }\n  private clean() {\n    if (!this.overlayObject) { return; }\n    this.overlayObject.style.display = 'none';\n  }\n}\n","import {\n  Directive,\n  ViewContainerRef,\n  ElementRef,\n  Input,\n  TemplateRef,\n  Type,\n  EventEmitter,\n  ComponentRef,\n  ComponentFactoryResolver, Renderer2, Injector, OnDestroy, OnInit, Output, Inject\n} from '@angular/core';\nimport { NgGuideWalkLibService } from './ng-guide-walk-lib.service';\nimport { toNumber, unsignedOnDestroyed, toBoolean } from './utils';\nimport { WalkEvent } from './ng-guide.types';\nimport { takeUntil } from 'rxjs/operators';\nimport { GuideContentComponent, WalkLocation } from './guide-content/guide-content.component';\nimport { DOCUMENT } from '@angular/common';\nexport type StepStatus = 'BeforeOpen' | 'Open' | 'BeforeClose' | 'AfterClose';\n\n@Directive({\n  selector: '[ngGuideStep]',\n})\nexport class NgGuideStepDirective implements OnInit, OnDestroy {\n  private overlay = null;\n  position = 'below';\n  private _step: number = 1;\n\n  @Input() rootElement = 'app-root';\n\n  @Input('ngGuideStep') set step(stepNumber: number | string) {\n    this._step = toNumber(stepNumber);\n  }\n  get step(): number | string {\n    return this._step;\n  }\n  @Input('ngGuideStepContent') ngGuideStepContent: string | TemplateRef<any> | Type<any>;\n  @Input('ngGuideStepLocation') ngGuideStepLocation: WalkLocation = 'bottom';\n  @Input('ngGuideStepStyle') ngGuideStepStyle: { [key: string]: string } | null = null;\n  @Input('ngGuideStepDisplayArrow') ngGuideStepDisplayArrow: boolean = true;\n  @Input('ngGuideStepOverlay') ngGuideStepOverlay: boolean | string = true;\n  @Input('ngGuideStepFocusElement') ngGuideStepFocusElement: boolean = true;\n\n  @Output('ngGuideStepStepStatus') ngGuideStepStepStatus: EventEmitter<StepStatus> = new EventEmitter();\n\n  private componentRef: ComponentRef<GuideContentComponent>;\n  constructor(\n    @Inject(DOCUMENT) private document: any,\n    private elementRef: ElementRef,\n    private viewContainerRef: ViewContainerRef,\n    private renderer: Renderer2,\n    private injector: Injector,\n    private resolver: ComponentFactoryResolver,\n    private walkLibService: NgGuideWalkLibService) { }\n\n  ngOnInit(): void {\n    this.subscribeToGuideRequest();\n    this.walkLibService.register(this.step as number);\n  }\n  ngOnDestroy(): void {\n    this.closeComponent();\n    this.walkLibService.unregister(this.step as number);\n  }\n  private closeComponent() {\n    if (!this.componentRef) { return; }\n    this.ngGuideStepStepStatus.emit('BeforeClose');\n    this.componentRef.destroy();\n    this.componentRef = null;\n    this.ngGuideStepStepStatus.emit('AfterClose');\n\n  }\n  private generateComponent() {\n    this.ngGuideStepStepStatus.emit('BeforeOpen');\n    const factory = this.resolver.resolveComponentFactory(GuideContentComponent);\n    const content = this.generateNgContent();\n    this.componentRef = this.viewContainerRef.createComponent(factory, 0, null, content);\n    this.setInputs();\n    this.handleFocus();\n    this.handleOverlay();\n    this.ngGuideStepStepStatus.emit('Open');\n  }\n\n  private createComponent() {\n    this.generateComponent();\n  }\n\n  generateNgContent() {\n    // Content is string\n    if (typeof this.ngGuideStepContent === 'string') {\n      const element = this.renderer.createText(this.ngGuideStepContent);\n      return [[element]];\n    }\n    // Content is Template\n    if (this.ngGuideStepContent instanceof TemplateRef) {\n      const viewRefTemplate = this.ngGuideStepContent.createEmbeddedView({});\n      return [viewRefTemplate.rootNodes];\n    }\n\n    // Else it's a component\n    const factory = this.resolver.resolveComponentFactory(this.ngGuideStepContent);\n    const viewRef = factory.create(this.injector);\n    return [[viewRef.location.nativeElement]];\n  }\n  private setInputs() {\n    const instanceRef = this.componentRef.instance;\n    instanceRef.step = this.step as number;\n    instanceRef.target = this.elementRef.nativeElement;\n    instanceRef.location = this.ngGuideStepLocation || 'bottom';\n    instanceRef.displayArrow = this.ngGuideStepDisplayArrow;\n    if (this.ngGuideStepStyle) {\n      instanceRef.customCss = this.ngGuideStepStyle;\n    }\n  }\n  private subscribeToGuideRequest() {\n    this.walkLibService.getStepObservable(<number>this.step)\n      .pipe(takeUntil(unsignedOnDestroyed(this)))\n      .subscribe((walkEvent: WalkEvent) => walkEvent.event === 'open' ? this.createComponent() : this.closeComponent());\n  }\n  private getOffset(element) {\n    const body = document.body;\n    const docEl = document.documentElement;\n    const scrollTop = window.pageYOffset || docEl.scrollTop || body.scrollTop;\n    const scrollLeft = window.pageXOffset || docEl.scrollLeft || body.scrollLeft;\n    const x = element.getBoundingClientRect();\n    return {\n      top: x.top + scrollTop,\n      width: x.width,\n      height: x.height,\n      left: x.left + scrollLeft\n    };\n  }\n  private handleOverlay() {\n    if (toBoolean(this.ngGuideStepOverlay)) {\n      this.overlay = this.renderer.createElement('div');\n      // this.overlay.className = 'overlay';\n      this.renderer.addClass(this.overlay, 'overlay');\n      this.tryAddOverlay();\n      const targetElm = this.elementRef.nativeElement;\n      \n      this.renderer.addClass(targetElm, 'helperLayer');\n      this.componentRef.onDestroy(() => {\n        this.renderer.removeChild(this.getRootElement(), this.overlay);\n          this.renderer.removeClass(this.elementRef.nativeElement, 'helperLayer');\n       });\n\n      // this.renderer.addClass(this.elementRef.nativeElement, 'overlay');\n      // this.componentRef.onDestroy(() => {\n      //  this.renderer.removeClass(this.elementRef.nativeElement, 'overlay');\n      // });\n    }\n  }\n  private tryAddOverlay() {\n    try {\n      this.renderer.appendChild(this.getRootElement(), this.overlay);\n    } catch (e) {}\n  }\n\n  private handleFocus() {\n    if (toBoolean(this.ngGuideStepFocusElement)) {\n      this.elementRef.nativeElement.focus();\n    }\n  }\n  private getRootElement() {\n    return !this.document ? this.document.body : this.getRootOfAllElement();\n  }\n  private getRootOfAllElement() {\n    let last = this.renderer.parentNode(this.elementRef.nativeElement);\n    let res = null;\n    while (last && last.localName !== this.rootElement){\n      res = last;\n      last = this.renderer.parentNode(res);\n    }\n    if (last) {\n      res = last;\n    }\n    return res;\n  }\n\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\n// import { CommonModule } from '@angular/common';\nimport { NgGuideWalkLibComponent } from './ng-guide-walk-lib.component';\nimport { NgGuideStepDirective } from './ng-guide-step.directive';\nimport { GuideContentComponent } from './guide-content/guide-content.component';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgGuideWalkLibService } from './ng-guide-walk-lib.service';\nimport { CommonModule } from '@angular/common';\n@NgModule({\n  imports: [\n    CommonModule,\n    // BrowserModule,\n  ],\n  entryComponents: [GuideContentComponent],\n  declarations: [NgGuideWalkLibComponent,\n    NgGuideStepDirective,\n    GuideContentComponent],\n  exports: [\n    NgGuideWalkLibComponent,\n    NgGuideStepDirective,\n    GuideContentComponent]\n})\nexport class NgGuideWalkLibModule {\n  static forRoot(): ModuleWithProviders {\n\n    return {\n      ngModule: NgGuideWalkLibModule,\n      providers: [\n\n        {\n          provide: NgGuideWalkLibService,\n          useClass: NgGuideWalkLibService\n        }\n\n      ]\n    };\n  }\n}\n"],"names":["Subject","filter","Injectable","Component","ReplaySubject","GuideUtils.toNumber","ViewEncapsulation","ElementRef","Renderer2","Input","EventEmitter","TemplateRef","takeUntil","Directive","Inject","DOCUMENT","ViewContainerRef","Injector","ComponentFactoryResolver","Output","NgModule","CommonModule"],"mappings":"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"}