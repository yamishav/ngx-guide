!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("popper.js")):"function"==typeof define&&define.amd?define("ng-guide-walk-lib",["exports","@angular/common","rxjs","rxjs/operators","@angular/core","popper.js"],t):t(e["ng-guide-walk-lib"]={},e.ng.common,e.rxjs,e.rxjs.operators,e.ng.core,e.Popper)}(this,function(e,t,r,n,o,i){"use strict";i=i&&i.hasOwnProperty("default")?i["default"]:i;var s=function(){function e(){this.activeSteps=0,this.eventWalkSubject=new r.Subject,this.currentStep=null,this._config={}}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e},enumerable:!0,configurable:!0}),e.prototype.register=function(){this.activeSteps++},e.prototype.unregister=function(){this.activeSteps--},e.prototype.isLast=function(e){return this.activeSteps===e},e.prototype.stopGuide=function(){this.closeCurrentStep(),this.currentStep=undefined},e.prototype.startGuide=function(){this.currentStep=1,this.invokeStep(this.currentStep)},e.prototype.invokeStep=function(e){this.closeCurrentStep(),this.currentStep=e,this.eventWalkSubject.next({step:e,event:"open"})},e.prototype.closeCurrentStep=function(){this.currentStep&&this.eventWalkSubject.next({step:this.currentStep,event:"close"})},e.prototype.nextGuide=function(){this.closeCurrentStep(),this.currentStep++,this.invokeStep(this.currentStep)},e.prototype.getStepObservable=function(t){return this.eventWalkSubject.asObservable().pipe(n.filter(function(e){return e.step===t}))},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=o.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),p=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:o.Component,args:[{selector:"ng-guide-walk",template:"\n    <p>\n      ng-guide-walk-lib works!\n    </p>\n    <ng-content></ng-content>\n  "}]}],e.ctorParameters=function(){return[]},e}();function u(e){return Number.isInteger(e)?e:Number.parseInt(e)}var a=function(){function e(e,t,n,o){this._element=e,this._renderer=t,this.host=n,this.guideService=o,this.currentAction="next",this._step=1,this.show=!0,this.overlayObject=null,this.shouldCreateOverlay=!1,this.positionFixed=!1,this.eventsEnabled=!0,this.location="right",this.displayArrow=!0,this.customCss=null}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=u(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=e.location,n=e.positionFixed,o=e.eventsEnabled,r=e.modifiers;this.popper=new i(this.getNode(),this._element.nativeElement.querySelector(".ngx-guide"),{placement:t,positionFixed:n,eventsEnabled:o,modifiers:r})},e.prototype.ngOnDestroy=function(){this.popper.destroy(),this.clean()},e.prototype.next=function(){this.guideService.nextGuide()},e.prototype.isLast=function(){return this.guideService.isLast(this.step)},e.prototype.done=function(){this.guideService.stopGuide()},e.prototype.getNode=function(){return this.target?"string"==typeof this.target?document.querySelector(this.target):this.target:this._element.nativeElement},e.prototype.clean=function(){this.overlayObject&&(this.overlayObject.style.display="none")},e.decorators=[{type:o.Component,args:[{encapsulation:o.ViewEncapsulation.None,selector:"ng-guide-content",template:'<div class="ngx-guide"\n[ngStyle]="customCss"\n[class.visible]="show">\n \n  <ng-content></ng-content>\n  <hr>\n  \n  <button type="button" class="ngx-guide__close" (click)="next()">\n    next\n  </button>\n  <button type="button" class="ngx-guide__close" (click)="done()">\n    done\n  </button>\n  \n  <div *ngIf="displayArrow" [ngStyle]="customCss" class="ngx-guide__arrow" x-arrow></div>\n</div>',styles:[".ngx-guide{position:absolute;background:#ffc107;color:#fff;opacity:.85;width:150px;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.5);padding:10px;text-align:center;z-index:9999}.ngx-guide:not(.visible){display:none}.ngx-guide .ngx-guide__arrow{width:0;height:0;border-style:solid;border-color:#ffc107;position:absolute;margin:5px}.ngx-guide[x-placement^=top]{margin-bottom:5px}.ngx-guide[x-placement^=top] .ngx-guide__arrow{border-width:5px 5px 0;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;bottom:-5px;left:calc(50% - 5px);margin-top:0;margin-bottom:0}.ngx-guide[x-placement^=bottom]{margin-top:5px}.ngx-guide[x-placement^=bottom] .ngx-guide__arrow{border-width:0 5px 5px;border-left-color:transparent;border-right-color:transparent;border-top-color:transparent;top:-5px;left:calc(50% - 5px);margin-top:0;margin-bottom:0}.ngx-guide[x-placement^=right]{margin-left:5px}.ngx-guide[x-placement^=right] .ngx-guide__arrow{border-width:5px 5px 5px 0;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-5px;top:calc(50% - 5px);margin-left:0;margin-right:0}.ngx-guide[x-placement^=left]{margin-right:5px}.ngx-guide[x-placement^=left] .ngx-guide__arrow{border-width:5px 0 5px 5px;border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;right:-5px;top:calc(50% - 5px);margin-left:0;margin-right:0}.overlay{padding:10px;z-index:0;box-shadow:0 0 0 100vmax rgba(0,0,0,.5)}"]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.Renderer2},{type:o.ElementRef},{type:s}]},e.propDecorators={shouldCreateOverlay:[{type:o.Input}],modifiers:[{type:o.Input}],positionFixed:[{type:o.Input}],eventsEnabled:[{type:o.Input}],target:[{type:o.Input}],location:[{type:o.Input}],displayArrow:[{type:o.Input}],customCss:[{type:o.Input}],step:[{type:o.Input}]},e}(),c=function(){function e(e,t,n,o,r,i){this.elementRef=e,this.viewContainerRef=t,this.renderer=n,this.injector=o,this.resolver=r,this.walkLibService=i,this.position="below",this._step=1,this.ngGuideStepLocation="bottom",this.ngGuideStepStyle=null,this.ngGuideStepDisplayArrow=!0,this.ngGuideStepFocusElement=!0}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=u(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.subscribeToGuideRequest(),this.walkLibService.register()},e.prototype.ngOnDestroy=function(){this.closeComponent(),this.walkLibService.unregister()},e.prototype.closeComponent=function(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)},e.prototype.createComponent=function(){var e=this.resolver.resolveComponentFactory(a),t=this.generateNgContent();this.componentRef=this.viewContainerRef.createComponent(e,0,null,t),this.setInputs(),this.handleFocus(),this.handleOverlay()},e.prototype.generateNgContent=function(){return"string"==typeof this.ngGuideStepContent?[[this.renderer.createText(this.ngGuideStepContent)]]:this.ngGuideStepContent instanceof o.TemplateRef?[this.ngGuideStepContent.createEmbeddedView({}).rootNodes]:[[this.resolver.resolveComponentFactory(this.ngGuideStepContent).create(this.injector).location.nativeElement]]},e.prototype.setInputs=function(){var e=this.componentRef.instance;e.step=this.step,e.target=this.elementRef.nativeElement,e.location=this.ngGuideStepLocation||"bottom",e.displayArrow=this.ngGuideStepDisplayArrow,this.ngGuideStepStyle&&(e.customCss=this.ngGuideStepStyle)},e.prototype.subscribeToGuideRequest=function(){var t=this;this.walkLibService.getStepObservable(this.step).pipe(n.takeUntil(function o(e){var t=e.ngOnDestroy,n=new r.ReplaySubject(1);return e.ngOnDestroy=function(){t.apply(e),n.next(undefined),n.complete()},n}(this))).subscribe(function(e){return"open"===e.event?t.createComponent():t.closeComponent()})},e.prototype.handleOverlay=function(){var e=this;this.renderer.addClass(this.elementRef.nativeElement,"overlay"),this.componentRef.onDestroy(function(){e.renderer.removeClass(e.elementRef.nativeElement,"overlay")})},e.prototype.handleFocus=function(){this.ngGuideStepFocusElement&&this.elementRef.nativeElement.focus()},e.decorators=[{type:o.Directive,args:[{selector:"[ngGuideStep]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.ViewContainerRef},{type:o.Renderer2},{type:o.Injector},{type:o.ComponentFactoryResolver},{type:s}]},e.propDecorators={step:[{type:o.Input,args:["ngGuideStep"]}],ngGuideStepContent:[{type:o.Input,args:["ngGuideStepContent"]}],ngGuideStepLocation:[{type:o.Input,args:["ngGuideStepLocation"]}],ngGuideStepStyle:[{type:o.Input,args:["ngGuideStepStyle"]}],ngGuideStepDisplayArrow:[{type:o.Input,args:["ngGuideStepDisplayArrow"]}],ngGuideStepFocusElement:[{type:o.Input,args:["ngGuideStepFocusElement"]}]},e}(),l=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule],entryComponents:[a],declarations:[p,c,a],exports:[p,c,a]}]}],e}();e.NgGuideWalkLibService=s,e.NgGuideWalkLibComponent=p,e.NgGuideWalkLibModule=l,e.NgGuideStepDirective=c,e.GuideContentComponent=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-guide-walk-lib.umd.min.js.map