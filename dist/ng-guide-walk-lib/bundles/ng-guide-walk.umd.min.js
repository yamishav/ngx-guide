!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("popper.js"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-guide-walk",["exports","@angular/core","rxjs","rxjs/operators","popper.js","@angular/common"],t):t((e=e||self)["ng-guide-walk"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.Popper,e.ng.common)}(this,(function(e,t,n,o,r,i){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var s=function(){function e(){this.activeSteps=[],this.eventWalkSubject=new n.Subject,this.currentStep=null,this._config={}}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e},enumerable:!0,configurable:!0}),e.prototype.register=function(e){this.activeSteps.push(e)},e.prototype.unregister=function(e){this.activeSteps=this.activeSteps.filter((function(t){return t!==e}))},e.prototype.isLast=function(e){return!this.currentStep||this.activeSteps.length===e},e.prototype.stopGuide=function(){this.closeCurrentStep(),this.currentStep=void 0},e.prototype.startGuide=function(){this.activeSteps.sort(),this.currentStep||(this.currentStep=1,this.invokeStep(this.currentStep))},e.prototype.invokeStep=function(e){this.closeCurrentStep(),this.currentStep=this.activeSteps[e-1],this.eventWalkSubject.next({step:e,event:"open"})},e.prototype.closeCurrentStep=function(){this.currentStep&&this.eventWalkSubject.next({step:this.currentStep,event:"close"})},e.prototype.nextGuide=function(){this.closeCurrentStep(),this.isLast(this.currentStep)?this.currentStep=void 0:(this.currentStep++,this.invokeStep(this.currentStep))},e.prototype.getStepObservable=function(e){return this.eventWalkSubject.asObservable().pipe(o.filter((function(t){return t.step===e})))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var p=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"ng-guide-walk",template:"\n    <p>\n      ng-guide-walk-lib works!\n    </p>\n    <ng-content></ng-content>\n  "}]}],e.ctorParameters=function(){return[]},e}();function a(e){return Number.isInteger(e)?e:Number.parseInt(e)}function u(e){return"true"==String(e)}var c=function(){function e(e,t,n,o){this._element=e,this._renderer=t,this.host=n,this.guideService=o,this.currentAction="next",this._step=1,this.show=!0,this.overlayObject=null,this.shouldCreateOverlay=!1,this.positionFixed=!1,this.eventsEnabled=!0,this.location="right",this.displayArrow=!0,this.customCss=null}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=a(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.location,t=this.positionFixed,n=this.eventsEnabled,o=this.modifiers;this.popper=new r(this.getNode(),this._element.nativeElement.querySelector(".ngx-guide"),{placement:e,positionFixed:t,eventsEnabled:n,modifiers:o})},e.prototype.ngOnDestroy=function(){this.popper.destroy(),this.clean()},e.prototype.next=function(){this.guideService.nextGuide()},e.prototype.isLast=function(){return this.guideService.isLast(this.step)},e.prototype.done=function(){this.guideService.stopGuide()},e.prototype.getNode=function(){return this.target?"string"==typeof this.target?document.querySelector(this.target):this.target:this._element.nativeElement},e.prototype.clean=function(){this.overlayObject&&(this.overlayObject.style.display="none")},e.decorators=[{type:t.Component,args:[{encapsulation:t.ViewEncapsulation.None,selector:"ng-guide-content",template:'<div class="ngx-guide"\n[ngStyle]="customCss"\n[class.visible]="show">\n \n  <ng-content></ng-content>\n  <hr>\n  \n  <button type="button" class="ngx-guide__close" (click)="next()">\n    next\n  </button>\n  <button type="button" class="ngx-guide__close" (click)="done()">\n    done\n  </button>\n  \n  <div *ngIf="displayArrow" [ngStyle]="customCss" class="ngx-guide__arrow" x-arrow></div>\n</div>',styles:[".ngx-guide{position:absolute;background:#ffc107;color:#fff;opacity:.85;width:150px;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.5);padding:10px;text-align:center;z-index:9999}.ngx-guide:not(.visible){display:none}.ngx-guide .ngx-guide__arrow{width:0;height:0;border-style:solid;border-color:#ffc107;position:absolute;margin:5px}.ngx-guide[x-placement^=top]{margin-bottom:5px}.ngx-guide[x-placement^=top] .ngx-guide__arrow{border-width:5px 5px 0;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;bottom:-5px;left:calc(50% - 5px);margin-top:0;margin-bottom:0}.ngx-guide[x-placement^=bottom]{margin-top:10px}.ngx-guide[x-placement^=bottom] .ngx-guide__arrow{border-width:0 5px 5px;border-left-color:transparent;border-right-color:transparent;border-top-color:transparent;top:-5px;left:calc(50% - 5px);margin-top:0;margin-bottom:0}.ngx-guide[x-placement^=right]{margin-left:10px}.ngx-guide[x-placement^=right] .ngx-guide__arrow{border-width:5px 5px 5px 0;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-5px;top:calc(50% - 5px);margin-left:0;margin-right:0}.ngx-guide[x-placement^=left]{margin-right:10px}.ngx-guide[x-placement^=left] .ngx-guide__arrow{border-width:5px 0 5px 5px;border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;right:-5px;top:calc(50% - 5px);margin-left:0;margin-right:0}.overlay{top:0;bottom:0;left:0;right:0;opacity:.8;position:absolute;box-sizing:content-box;z-index:99;background-color:#000;opacity:.55;background:radial-gradient(center,ellipse farthest-corner,rgba(0,0,0,.4) 0,rgba(0,0,0,.9) 100%);-webkit-transition:.3s ease-out;transition:.3s ease-out}.helperLayer{padding:2px;box-sizing:content-box;position:absolute;z-index:9999998;background-color:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.5);border-radius:4px;box-shadow:0 2px 15px rgba(0,0,0,.4);-webkit-transition:.3s ease-out;transition:.3s ease-out}"]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:t.ElementRef},{type:s}]},e.propDecorators={shouldCreateOverlay:[{type:t.Input}],modifiers:[{type:t.Input}],positionFixed:[{type:t.Input}],eventsEnabled:[{type:t.Input}],target:[{type:t.Input}],location:[{type:t.Input}],displayArrow:[{type:t.Input}],customCss:[{type:t.Input}],step:[{type:t.Input}]},e}();var l=function(){function e(e,n,o,r,i,s,p){this.document=e,this.elementRef=n,this.viewContainerRef=o,this.renderer=r,this.injector=i,this.resolver=s,this.walkLibService=p,this.overlay=null,this.position="below",this._step=1,this.rootElement="app-root",this.ngGuideStepLocation="bottom",this.ngGuideStepStyle=null,this.ngGuideStepDisplayArrow=!0,this.ngGuideStepOverlay=!0,this.ngGuideStepFocusElement=!0,this.ngGuideStepStepStatus=new t.EventEmitter}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=a(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.subscribeToGuideRequest(),this.walkLibService.register(this.step)},e.prototype.ngOnDestroy=function(){this.closeComponent(),this.walkLibService.unregister(this.step)},e.prototype.closeComponent=function(){this.componentRef&&(this.ngGuideStepStepStatus.emit("BeforeClose"),this.componentRef.destroy(),this.componentRef=null,this.ngGuideStepStepStatus.emit("AfterClose"))},e.prototype.generateComponent=function(){this.ngGuideStepStepStatus.emit("BeforeOpen");var e=this.resolver.resolveComponentFactory(c),t=this.generateNgContent();this.componentRef=this.viewContainerRef.createComponent(e,0,null,t),this.setInputs(),this.handleFocus(),this.handleOverlay(),this.ngGuideStepStepStatus.emit("Open")},e.prototype.createComponent=function(){this.generateComponent()},e.prototype.generateNgContent=function(){return"string"==typeof this.ngGuideStepContent?[[this.renderer.createText(this.ngGuideStepContent)]]:this.ngGuideStepContent instanceof t.TemplateRef?[this.ngGuideStepContent.createEmbeddedView({}).rootNodes]:[[this.resolver.resolveComponentFactory(this.ngGuideStepContent).create(this.injector).location.nativeElement]]},e.prototype.setInputs=function(){var e=this.componentRef.instance;e.step=this.step,e.target=this.elementRef.nativeElement,e.location=this.ngGuideStepLocation||"bottom",e.displayArrow=this.ngGuideStepDisplayArrow,this.ngGuideStepStyle&&(e.customCss=this.ngGuideStepStyle)},e.prototype.subscribeToGuideRequest=function(){var e,t,r,i=this;this.walkLibService.getStepObservable(this.step).pipe(o.takeUntil((e=this,t=e.ngOnDestroy,r=new n.ReplaySubject(1),e.ngOnDestroy=function(){t.apply(e),r.next(void 0),r.complete()},r))).subscribe((function(e){return"open"===e.event?i.createComponent():i.closeComponent()}))},e.prototype.getOffset=function(e){var t=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||t.scrollTop,r=window.pageXOffset||n.scrollLeft||t.scrollLeft,i=e.getBoundingClientRect();return{top:i.top+o,width:i.width,height:i.height,left:i.left+r}},e.prototype.handleOverlay=function(){var e=this;if(u(this.ngGuideStepOverlay)){this.overlay=this.renderer.createElement("div"),this.renderer.addClass(this.overlay,"overlay"),this.tryAddOverlay();var t=this.elementRef.nativeElement;this.renderer.addClass(t,"helperLayer"),this.componentRef.onDestroy((function(){e.renderer.removeChild(e.getRootElement(),e.overlay),e.renderer.removeClass(e.elementRef.nativeElement,"helperLayer")}))}},e.prototype.tryAddOverlay=function(){try{this.renderer.appendChild(this.getRootElement(),this.overlay)}catch(e){}},e.prototype.handleFocus=function(){u(this.ngGuideStepFocusElement)&&this.elementRef.nativeElement.focus()},e.prototype.getRootElement=function(){return this.document?this.getRootOfAllElement():this.document.body},e.prototype.getRootOfAllElement=function(){for(var e=this.renderer.parentNode(this.elementRef.nativeElement),t=null;e&&e.localName!==this.rootElement;)t=e,e=this.renderer.parentNode(t);return e&&(t=e),t},e.decorators=[{type:t.Directive,args:[{selector:"[ngGuideStep]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[i.DOCUMENT]}]},{type:t.ElementRef},{type:t.ViewContainerRef},{type:t.Renderer2},{type:t.Injector},{type:t.ComponentFactoryResolver},{type:s}]},e.propDecorators={rootElement:[{type:t.Input}],step:[{type:t.Input,args:["ngGuideStep"]}],ngGuideStepContent:[{type:t.Input,args:["ngGuideStepContent"]}],ngGuideStepLocation:[{type:t.Input,args:["ngGuideStepLocation"]}],ngGuideStepStyle:[{type:t.Input,args:["ngGuideStepStyle"]}],ngGuideStepDisplayArrow:[{type:t.Input,args:["ngGuideStepDisplayArrow"]}],ngGuideStepOverlay:[{type:t.Input,args:["ngGuideStepOverlay"]}],ngGuideStepFocusElement:[{type:t.Input,args:["ngGuideStepFocusElement"]}],ngGuideStepStepStatus:[{type:t.Output,args:["ngGuideStepStepStatus"]}]},e}();var d=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:s,useClass:s}]}},e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],entryComponents:[c],declarations:[p,l,c],exports:[p,l,c]}]}],e}();e.GuideContentComponent=c,e.NgGuideStepDirective=l,e.NgGuideWalkLibComponent=p,e.NgGuideWalkLibModule=d,e.NgGuideWalkLibService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-guide-walk.umd.min.js.map