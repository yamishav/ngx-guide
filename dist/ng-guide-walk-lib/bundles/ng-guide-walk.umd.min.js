!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("popper.js"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-guide-walk",["exports","rxjs","rxjs/operators","@angular/core","popper.js","@angular/common"],t):t(e["ng-guide-walk"]={},e.rxjs,e.rxjs.operators,e.ng.core,e.Popper,e.ng.common)}(this,function(e,r,n,p,i,t){"use strict";i=i&&i.hasOwnProperty("default")?i["default"]:i;var o=function(){function e(){this.activeSteps=[],this.eventWalkSubject=new r.Subject,this.currentStep=null,this._config={}}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e},enumerable:!0,configurable:!0}),e.prototype.register=function(e){this.activeSteps.push(e)},e.prototype.unregister=function(t){this.activeSteps=this.activeSteps.filter(function(e){return e!==t})},e.prototype.isLast=function(e){return!this.currentStep||this.activeSteps.length===e},e.prototype.stopGuide=function(){this.closeCurrentStep(),this.currentStep=undefined},e.prototype.startGuide=function(){this.activeSteps.sort(),this.currentStep||(this.currentStep=1,this.invokeStep(this.currentStep))},e.prototype.invokeStep=function(e){this.closeCurrentStep(),this.currentStep=this.activeSteps[e-1],this.eventWalkSubject.next({step:e,event:"open"})},e.prototype.closeCurrentStep=function(){this.currentStep&&this.eventWalkSubject.next({step:this.currentStep,event:"close"})},e.prototype.nextGuide=function(){this.closeCurrentStep(),this.isLast(this.currentStep)?this.currentStep=undefined:(this.currentStep++,this.invokeStep(this.currentStep))},e.prototype.getStepObservable=function(t){return this.eventWalkSubject.asObservable().pipe(n.filter(function(e){return e.step===t}))},e.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=p.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),s=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:p.Component,args:[{selector:"ng-guide-walk",template:"\n    <p>\n      ng-guide-walk-lib works!\n    </p>\n    <ng-content></ng-content>\n  "}]}],e.ctorParameters=function(){return[]},e}();function u(e){return Number.isInteger(e)?e:Number.parseInt(e)}function a(e){return"true"==String(e)}var c=function(){function e(e,t,n,o){this._element=e,this._renderer=t,this.host=n,this.guideService=o,this.currentAction="next",this._step=1,this.show=!0,this.overlayObject=null,this.shouldCreateOverlay=!1,this.positionFixed=!1,this.eventsEnabled=!0,this.location="right",this.displayArrow=!0,this.customCss=null}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=u(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=e.location,n=e.positionFixed,o=e.eventsEnabled,r=e.modifiers;this.popper=new i(this.getNode(),this._element.nativeElement.querySelector(".ngx-guide"),{placement:t,positionFixed:n,eventsEnabled:o,modifiers:r})},e.prototype.ngOnDestroy=function(){this.popper.destroy(),this.clean()},e.prototype.next=function(){this.guideService.nextGuide()},e.prototype.isLast=function(){return this.guideService.isLast(this.step)},e.prototype.done=function(){this.guideService.stopGuide()},e.prototype.getNode=function(){return this.target?"string"==typeof this.target?document.querySelector(this.target):this.target:this._element.nativeElement},e.prototype.clean=function(){this.overlayObject&&(this.overlayObject.style.display="none")},e.decorators=[{type:p.Component,args:[{encapsulation:p.ViewEncapsulation.None,selector:"ng-guide-content",template:'<div class="ngx-guide"\n[ngStyle]="customCss"\n[class.visible]="show">\n \n  <ng-content></ng-content>\n  <hr>\n  \n  <button type="button" class="ngx-guide__close" (click)="next()">\n    next\n  </button>\n  <button type="button" class="ngx-guide__close" (click)="done()">\n    done\n  </button>\n  \n  <div *ngIf="displayArrow" [ngStyle]="customCss" class="ngx-guide__arrow" x-arrow></div>\n</div>',styles:[".ngx-guide{position:absolute;background:#ffc107;color:#fff;opacity:.85;width:150px;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.5);padding:10px;text-align:center;z-index:9999}.ngx-guide:not(.visible){display:none}.ngx-guide .ngx-guide__arrow{width:0;height:0;border-style:solid;border-color:#ffc107;position:absolute;margin:5px}.ngx-guide[x-placement^=top]{margin-bottom:5px}.ngx-guide[x-placement^=top] .ngx-guide__arrow{border-width:5px 5px 0;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;bottom:-5px;left:calc(50% - 5px);margin-top:0;margin-bottom:0}.ngx-guide[x-placement^=bottom]{margin-top:10px}.ngx-guide[x-placement^=bottom] .ngx-guide__arrow{border-width:0 5px 5px;border-left-color:transparent;border-right-color:transparent;border-top-color:transparent;top:-5px;left:calc(50% - 5px);margin-top:0;margin-bottom:0}.ngx-guide[x-placement^=right]{margin-left:10px}.ngx-guide[x-placement^=right] .ngx-guide__arrow{border-width:5px 5px 5px 0;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-5px;top:calc(50% - 5px);margin-left:0;margin-right:0}.ngx-guide[x-placement^=left]{margin-right:10px}.ngx-guide[x-placement^=left] .ngx-guide__arrow{border-width:5px 0 5px 5px;border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;right:-5px;top:calc(50% - 5px);margin-left:0;margin-right:0}.overlay{top:0;bottom:0;left:0;right:0;opacity:.8;position:absolute;box-sizing:content-box;z-index:99;background-color:#000;opacity:.55;background:radial-gradient(center,ellipse farthest-corner,rgba(0,0,0,.4) 0,rgba(0,0,0,.9) 100%);transition:.3s ease-out}.helperLayer{padding:2px;box-sizing:content-box;position:absolute;z-index:9999998;background-color:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.5);border-radius:4px;box-shadow:0 2px 15px rgba(0,0,0,.4);transition:.3s ease-out}"]}]}],e.ctorParameters=function(){return[{type:p.ElementRef},{type:p.Renderer2},{type:p.ElementRef},{type:o}]},e.propDecorators={shouldCreateOverlay:[{type:p.Input}],modifiers:[{type:p.Input}],positionFixed:[{type:p.Input}],eventsEnabled:[{type:p.Input}],target:[{type:p.Input}],location:[{type:p.Input}],displayArrow:[{type:p.Input}],customCss:[{type:p.Input}],step:[{type:p.Input}]},e}(),l=function(){function e(e,t,n,o,r,i,s){this.document=e,this.elementRef=t,this.viewContainerRef=n,this.renderer=o,this.injector=r,this.resolver=i,this.walkLibService=s,this.overlay=null,this.position="below",this._step=1,this.rootElement="body",this.ngGuideStepLocation="bottom",this.ngGuideStepStyle=null,this.ngGuideStepDisplayArrow=!0,this.ngGuideStepOverlay=!0,this.ngGuideStepFocusElement=!0,this.ngGuideStepStepStatus=new p.EventEmitter}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=u(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.subscribeToGuideRequest(),this.walkLibService.register(this.step)},e.prototype.ngOnDestroy=function(){this.closeComponent(),this.walkLibService.unregister(this.step)},e.prototype.closeComponent=function(){this.componentRef&&(this.ngGuideStepStepStatus.emit("BeforeClose"),this.componentRef.destroy(),this.componentRef=null,this.ngGuideStepStepStatus.emit("AfterClose"))},e.prototype.generateComponent=function(){this.ngGuideStepStepStatus.emit("BeforeOpen");var e=this.resolver.resolveComponentFactory(c),t=this.generateNgContent();this.componentRef=this.viewContainerRef.createComponent(e,0,null,t),this.setInputs(),this.handleFocus(),this.handleOverlay(),this.ngGuideStepStepStatus.emit("Open")},e.prototype.createComponent=function(){this.generateComponent()},e.prototype.generateNgContent=function(){return"string"==typeof this.ngGuideStepContent?[[this.renderer.createText(this.ngGuideStepContent)]]:this.ngGuideStepContent instanceof p.TemplateRef?[this.ngGuideStepContent.createEmbeddedView({}).rootNodes]:[[this.resolver.resolveComponentFactory(this.ngGuideStepContent).create(this.injector).location.nativeElement]]},e.prototype.setInputs=function(){var e=this.componentRef.instance;e.step=this.step,e.target=this.elementRef.nativeElement,e.location=this.ngGuideStepLocation||"bottom",e.displayArrow=this.ngGuideStepDisplayArrow,this.ngGuideStepStyle&&(e.customCss=this.ngGuideStepStyle)},e.prototype.subscribeToGuideRequest=function(){var t=this;this.walkLibService.getStepObservable(this.step).pipe(n.takeUntil(function o(e){var t=e.ngOnDestroy,n=new r.ReplaySubject(1);return e.ngOnDestroy=function(){t.apply(e),n.next(undefined),n.complete()},n}(this))).subscribe(function(e){return"open"===e.event?t.createComponent():t.closeComponent()})},e.prototype.getOffset=function(e){var t=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||t.scrollTop,r=window.pageXOffset||n.scrollLeft||t.scrollLeft,i=e.getBoundingClientRect();return{top:i.top+o,width:i.width,height:i.height,left:i.left+r}},e.prototype.handleOverlay=function(){var e=this;if(a(this.ngGuideStepOverlay)){this.overlay=this.renderer.createElement("div"),this.renderer.addClass(this.overlay,"overlay"),this.renderer.appendChild(this.getRootElement(),this.overlay);this.elementRef.nativeElement;this.renderer.addClass(this.elementRef.nativeElement,"helperLayer"),this.componentRef.onDestroy(function(){e.renderer.removeChild(e.getRootElement(),e.overlay),e.renderer.removeClass(e.elementRef.nativeElement,"helperLayer")})}},e.prototype.handleFocus=function(){a(this.ngGuideStepFocusElement)&&this.elementRef.nativeElement.focus()},e.prototype.getRootElement=function(){return this.document?this.document.body:this.getRootOfAllElement()},e.prototype.getRootOfAllElement=function(){for(var e=this.renderer.parentNode(this.elementRef.nativeElement),t=null;e&&e.localName!==this.rootElement;)t=e,e=this.renderer.parentNode(t);return t},e.decorators=[{type:p.Directive,args:[{selector:"[ngGuideStep]"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:p.Inject,args:[t.DOCUMENT]}]},{type:p.ElementRef},{type:p.ViewContainerRef},{type:p.Renderer2},{type:p.Injector},{type:p.ComponentFactoryResolver},{type:o}]},e.propDecorators={rootElement:[{type:p.Input}],step:[{type:p.Input,args:["ngGuideStep"]}],ngGuideStepContent:[{type:p.Input,args:["ngGuideStepContent"]}],ngGuideStepLocation:[{type:p.Input,args:["ngGuideStepLocation"]}],ngGuideStepStyle:[{type:p.Input,args:["ngGuideStepStyle"]}],ngGuideStepDisplayArrow:[{type:p.Input,args:["ngGuideStepDisplayArrow"]}],ngGuideStepOverlay:[{type:p.Input,args:["ngGuideStepOverlay"]}],ngGuideStepFocusElement:[{type:p.Input,args:["ngGuideStepFocusElement"]}],ngGuideStepStepStatus:[{type:p.Output,args:["ngGuideStepStepStatus"]}]},e}(),d=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:o,useClass:o}]}},e.decorators=[{type:p.NgModule,args:[{imports:[t.CommonModule],entryComponents:[c],declarations:[s,l,c],exports:[s,l,c]}]}],e}();e.NgGuideWalkLibService=o,e.NgGuideWalkLibComponent=s,e.NgGuideWalkLibModule=d,e.NgGuideStepDirective=l,e.GuideContentComponent=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-guide-walk.umd.min.js.map